### hh.ru авто кликер

____
### Оглавление

- [Описание](#описание)
- [Установка и использование](#установка-и-использование)
    - [Общее](#общее)
    - [Настройка окружения](#настройка-окружения)
    - [Запуск сбора резюме](#запуск-сбора-резюме)
- [Файлы результатов](#файлы-результатов)
____
### Описание
Обновлённый скрипт автоматизирует поиск и сбор резюме на hh.ru. Проект
переведён на Page Object Model, все действия логируются, а элементы подсвечиваются,
если включена отладка интерфейса. Сбор может вестись одновременно по нескольким
поисковым запросам: скрипт проходит страницы выдачи, открывает каждое резюме,
извлекает ключевые поля (включая блок «О себе», перечисленные технологии и
ключевые навыки) и сохраняет результат в CSV. В выгрузку теперь попадают
детализированные сведения о языках, категориях водительских прав и весь
персональный блок (например, гражданство, готовность к переезду и т.д.).

#### Собираемые поля
- Идентификатор резюме и ссылка на него.
- ФИО, желаемая должность, зарплатные ожидания, город и возраст.
- Опыт работы, образование и свободное описание «О себе».
- Ключевые навыки (`data-qa="bloko-tag__text"`) и дополнительные ключевые
  слова из таблицы навыков.
- Список языков с указанием уровня владения.
- Сведения о водительских правах, гражданстве, готовности к переезду и другие
  данные личного блока — сохраняются как JSON, чтобы ничего не потерять.

#### Подходы к быстрому парсингу
- Поиск работает партиями по каждому запросу, в результатах открывается только
  одна дополнительная вкладка на резюме. Сразу после парсинга вкладка
  закрывается, что экономит память и ускоряет переход к следующей карточке.
- Selenium-ожидания сведены к малым таймаутам (1–2 секунды) для необязательных
  элементов. Это позволяет пропускать пустые блоки без длительных задержек.
- Данные сериализуются и добавляются в CSV инкрементально — повторный запуск
  пропускает уже собранные идентификаторы и не тратит время на дубли.
- Общий личный блок сохраняется в структурированном виде (JSON), поэтому не
  требуется повторных обращений к странице для уточнения отдельных атрибутов.

Во время работы прогресс записывается на диск после каждой успешной обработки
резюме. Благодаря этому даже при ошибке, блокировке или перезапуске браузера
уже собранные данные не теряются.
____
### Установка и использование
#### Общее
1. Установите [Python 3.10+](https://www.python.org/downloads/).
2. Проверьте наличие менеджера пакетов [pip](https://pip.pypa.io/en/stable/installation/).
3. Клонируйте репозиторий: `git clone https://github.com/AlexandrGroz/hh-clicker.git`.
4. Перейдите в созданную папку.
5. Создайте виртуальное окружение `python -m venv venv` и активируйте его.
6. Установите зависимости `pip install -r requirements.txt`.

#### Настройка окружения
1. Создайте файл `.env` в корне проекта.
2. Заполните файл переменными окружения (пример в разделе ниже).
3. Настройте список поисковых запросов через `SEARCH_QUERY`. Несколько
   специализаций перечисляются через запятую, например:
   `SEARCH_QUERY="frontend, backend, devops, it project manager"`.
4. При необходимости измените:
   - `RESUME_LIMIT` — лимит новых резюме на одну специализацию (по умолчанию 500,
     можно поднять до 1500 и более);
   - `EXISTING_RECORD_LIMIT` — сколько записей может быть в файле специализации
     до старта сбора; если достигнут порог (по умолчанию 1500), запрос пропускается;
   - `WAIT_TIMEOUT` — базовый таймаут ожиданий Selenium в секундах;
   - `DEBUG_UI` — `1` включает подсветку элементов и дополнительный вывод;
   - `BASE_URL` и `RESUME_SEARCH_URL` — домен и адрес стартовой страницы поиска
     резюме (для региональных поддоменов hh.ru).

#### Запуск сбора резюме
1. Убедитесь, что `.env` заполнен корректно и браузер Chrome установлен.
2. Запустите скрипт: `python script.py`.
3. В консоли отобразятся логи по каждой операции, а после завершения — итоговый
   отчёт по количеству новых резюме для каждого запроса.
____
### Файлы результатов
- Общий CSV-файл находится по пути, указанному в `OUTPUT_PATH`
  (по умолчанию `data/resumes.csv`). Файл пополняется после каждого нового
  резюме без перезаписи уже сохранённых записей.
- Для каждой специализации создаётся отдельный файл вида
 `resumes_<название_поиска>.csv` в той же директории. Название формируется из
  поискового запроса: пробелы и специальные символы заменяются на подчёркивания.
- При повторных запусках скрипт не дублирует резюме с тем же идентификатором —
  новые данные дописываются в существующие файлы.
- Если в файле для конкретного запроса уже есть нужный объём данных
  (`EXISTING_RECORD_LIMIT`), обработка этой специализации пропускается и скрипт
  переходит к следующему запросу.

> ⚠️ Чтобы не прервать сбор из-за ухода компьютера в сон, заранее отключите
> автоматический переход в спящий режим или используйте утилиту, которая
> имитирует активность пользователя.

Пример `.env`:

```
WAIT_TIMEOUT=10
DEBUG_UI=0
BASE_URL=https://hh.ru
RESUME_SEARCH_URL=https://tyumen.hh.ru/search/resume
DRIVER=chrome
SEARCH_QUERY="frontend, backend, devops, it project manager"
RESUME_LIMIT=1500
EXISTING_RECORD_LIMIT=1500
OUTPUT_PATH=data/resumes.csv
```

Отрегулируйте значения под ваши задачи перед запуском.
